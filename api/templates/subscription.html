<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subscription</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        /* Dark Mode Overrides */
        @media (prefers-color-scheme: dark) {
            body { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: #e2e8f0; }
            .topbar { background: #1e293b; box-shadow: 0 2px 12px rgba(0,0,0,0.4); }
            .card { background: #334155; color: #e2e8f0; }
            .hero { background: linear-gradient(120deg, #6366f1, #4338ca); }
            .btn { background: linear-gradient(90deg, #6366f1, #818cf8); }
            a { color: #93c5fd; }
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
            margin-top: 16px;
        }

        ul {
            list-style: none;
            padding-left: 0;
            margin-top: 10px;
            color: #475569;
        }

        ul li {
            margin-bottom: 6px;
        }

        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 1em;
        }

        input:focus {
            outline: none;
            border-color: #6366f1;
        }
    </style>
</head>
<body>

    <!-- Topbar -->
    <nav class="topbar">
        <div class="topbar-left">
            <h1>ğŸ“¦ Subscription</h1>
        </div>
        <div class="topbar-right">
            <button id="themeToggle" title="Toggle dark mode" style="border:none;background:none;cursor:pointer;font-size:1.2em;">ğŸŒ</button>
            <select onchange="if (this.value) window.location.href=this.value;">
                <option disabled selected>âš™ï¸</option>
                <option value="{{ url_for('show_home') }}">ğŸ  Home</option>
                <option value="{{ url_for('money_spent') }}">ğŸ’µ Spending</option>
                <option value="{{ url_for('favorite_recipes') }}">â¤ï¸ Favorites</option>
                <option value="{{ url_for('logout') }}">ğŸ”“ Logout</option>
            </select>
        </div>
    </nav>

    <!-- Dashboard -->
    <main class="dashboard">

        <!-- Hero -->
        <section class="hero" style="text-align:center;">
            <h2>Manage Your Subscription</h2>
            <p>Upgrade, manage billing, or cancel anytime.</p>
        </section>

        <!-- Current Plan -->
        <section class="card" style="text-align:center;">
            <h2>Your Current Plan</h2>
            <p style="font-size:1.1em; color:#374151; margin-bottom:8px;">Free Tier</p>
            <p style="font-size:0.95em; color:#64748b; margin-bottom:20px;">
                Access all recipes and 5 daily swipes.
            </p>
            <button class="btn">Upgrade Plan</button>
        </section>

        <!-- Available Plans -->
        <section class="card">
            <h2 style="text-align:center;">Choose a Plan</h2>
            <div class="plans-grid">
                <div class="card" style="text-align:center;">
                    <h3>ğŸ¥— Basic</h3>
                    <p style="font-weight:600; color:#374151;">$4.99 / month</p>
                    <ul>
                        <li>âœ” Save up to 50 favorite recipes</li>
                        <li>âœ” View nutrition info</li>
                        <li>âœ” Ad-free experience</li>
                        <li>âœ” Swipe 10 new recipes daily</li>
                    </ul>
                    <button class="btn btn-success">Select</button>
                </div>

                <div class="card" style="text-align:center;">
                    <h3>ğŸ”¥ Premium</h3>
                    <p style="font-weight:600; color:#374151;">$9.99 / month</p>
                    <ul>
                        <li>âœ” Unlimited favorites</li>
                        <li>âœ” Meal plan generator</li>
                        <li>âœ” Grocery list sync</li>
                        <li>âœ” Swipe 20 new recipes daily</li>
                    </ul>
                    <button class="btn btn-success">Select</button>
                </div>
            </div>
        </section>

        <!-- Payment Details -->
        <section class="card" style="text-align:center;">
            <h2>Payment Details</h2>
            <form method="POST" action="/update-subscription" style="max-width:400px; margin:0 auto;">
                <input type="text" name="card_number" placeholder="Card Number" required>
                <input type="text" name="exp_date" placeholder="MM/YY" required>
                <input type="text" name="cvv" placeholder="CVV" required>
                <button type="submit" class="btn" style="width:100%;">Save Payment Info</button>
            </form>
        </section>

        <!-- Cancel / Manage -->
        <section class="card" style="text-align:center;">
            <h2>Manage Subscription</h2>
            <p style="color:#4b5563;">Want to cancel or pause your plan?</p>
            <button class="btn btn-danger">Cancel Subscription</button>
        </section>

        <!-- Back Home -->
        <div style="text-align:center; margin-top:30px;">
            <a href="{{ url_for('show_home') }}" class="btn" style="max-width:180px;">â¬… Back to Home</a>
        </div>

    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>Â© {{ current_year }} Meal Planner â€” Simple plans for smarter meals.</p>
    </footer>

    <!-- Dark Mode Toggle Script -->
    <script>
        const toggleButton = document.getElementById('themeToggle');
        const body = document.body;

        // Load saved preference
        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark');
            toggleButton.textContent = 'ğŸŒ™';
        }

        toggleButton.addEventListener('click', () => {
            body.classList.toggle('dark');
            const darkMode = body.classList.contains('dark');
            toggleButton.textContent = darkMode ? 'ğŸŒ™' : 'ğŸŒ';
            localStorage.setItem('theme', darkMode ? 'dark' : 'light');
        });
    </script>

</body>
</html>
